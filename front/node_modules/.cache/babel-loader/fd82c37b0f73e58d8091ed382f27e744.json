{"ast":null,"code":"import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport { getItem, addItem, removeItem } from \"./LocaleStorage\";\nexport function hasAuthenticated() {\n  const token = getItem(\"miniblogToken\");\n  const result = token ? tokenIsValid(token) : false;\n\n  if (false === result) {\n    removeItem(\"miniblogToken\");\n  }\n\n  return result;\n}\nexport async function login(credentials) {\n  return axios.post(`${process.env.REACT_APP_API_URL}api/user/login`, credentials).then(response => response.data.token).then(token => {\n    addItem(\"miniblogToken\", token);\n    return true;\n  });\n}\nexport function logout() {\n  removeItem(\"miniblogToken\");\n}\n\nfunction tokenIsValid(token) {\n  const {\n    exp: expiration\n  } = jwtDecode(token);\n\n  if (expiration * 1000 > new Date().getTime()) {\n    return true;\n  }\n\n  return false;\n}","map":{"version":3,"sources":["/home/hmathlouthi-pc/Bureau/devops/Alrahala/client/src/services/AuthApi.js"],"names":["axios","jwtDecode","getItem","addItem","removeItem","hasAuthenticated","token","result","tokenIsValid","login","credentials","post","process","env","REACT_APP_API_URL","then","response","data","logout","exp","expiration","Date","getTime"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,EAAkBC,OAAlB,EAA2BC,UAA3B,QAA6C,iBAA7C;AAEA,OAAO,SAASC,gBAAT,GAA4B;AACjC,QAAMC,KAAK,GAAGJ,OAAO,CAAC,eAAD,CAArB;AACA,QAAMK,MAAM,GAAGD,KAAK,GAAGE,YAAY,CAACF,KAAD,CAAf,GAAyB,KAA7C;;AAEA,MAAI,UAAUC,MAAd,EAAsB;AACpBH,IAAAA,UAAU,CAAC,eAAD,CAAV;AACD;;AACD,SAAOG,MAAP;AACD;AAED,OAAO,eAAeE,KAAf,CAAqBC,WAArB,EAAkC;AACvC,SAAOV,KAAK,CACTW,IADI,CACE,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,gBADlC,EACmDJ,WADnD,EAEJK,IAFI,CAEEC,QAAD,IAAcA,QAAQ,CAACC,IAAT,CAAcX,KAF7B,EAGJS,IAHI,CAGET,KAAD,IAAW;AACfH,IAAAA,OAAO,CAAC,eAAD,EAAkBG,KAAlB,CAAP;AACA,WAAO,IAAP;AACD,GANI,CAAP;AAOD;AACD,OAAO,SAASY,MAAT,GAAkB;AACvBd,EAAAA,UAAU,CAAC,eAAD,CAAV;AACD;;AACD,SAASI,YAAT,CAAsBF,KAAtB,EAA6B;AAC3B,QAAM;AAAEa,IAAAA,GAAG,EAAEC;AAAP,MAAsBnB,SAAS,CAACK,KAAD,CAArC;;AACA,MAAIc,UAAU,GAAG,IAAb,GAAoB,IAAIC,IAAJ,GAAWC,OAAX,EAAxB,EAA8C;AAC5C,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD","sourcesContent":["import axios from \"axios\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport { getItem, addItem, removeItem } from \"./LocaleStorage\";\r\n\r\nexport function hasAuthenticated() {\r\n  const token = getItem(\"miniblogToken\");\r\n  const result = token ? tokenIsValid(token) : false;\r\n\r\n  if (false === result) {\r\n    removeItem(\"miniblogToken\");\r\n  }\r\n  return result;\r\n}\r\n\r\nexport async function login(credentials) {\r\n  return axios\r\n    .post(`${process.env.REACT_APP_API_URL}api/user/login`, credentials)\r\n    .then((response) => response.data.token)\r\n    .then((token) => {\r\n      addItem(\"miniblogToken\", token);\r\n      return true;\r\n    });\r\n}\r\nexport function logout() {\r\n  removeItem(\"miniblogToken\");\r\n}\r\nfunction tokenIsValid(token) {\r\n  const { exp: expiration } = jwtDecode(token);\r\n  if (expiration * 1000 > new Date().getTime()) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}